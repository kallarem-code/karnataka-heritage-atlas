<!DOCTYPE html>
<html lang="en">
<head> <!-- Leaflet.markercluster (for clustered markers) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>From Stone to Story ‚Äî Karnataka‚Äôs Living Heritage (Demo+)</title><!-- Leaflet map -->
  <!-- after map init -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <!-- QR code helper -->
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <style>
    :root { --bg:#0b1020; --fg:#f6f7fb; --muted:#b7c4d6; --accent:#5be3c1; --accent2:#7aa8ff; --card:#121935; --chip:#1a2246; --chip-h:#243061; --ring:#79ffd7; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 10% 10%,#121a38,transparent),radial-gradient(1000px 500px at 90% 10%,#0f1b2f,transparent),radial-gradient(900px 600px at 50% 90%,#0c1330,transparent),var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{color:inherit}
    .container{max-width:1240px;margin:0 auto;padding:0 20px}
    header{position:fixed;top:0;left:0;right:0;z-index:30;background:linear-gradient(to bottom,rgba(11,16,32,.9),rgba(11,16,32,.6),transparent);backdrop-filter:saturate(160%) blur(10px)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:.6rem;align-items:center;font-weight:700;letter-spacing:.3px}
    .brand .logo{width:28px;height:28px;display:grid;place-items:center;border-radius:8px;background:conic-gradient(from 90deg, var(--accent), var(--accent2));box-shadow:0 0 0 2px #0b1020, 0 0 24px rgba(91,227,193,.35)}
    .brand small{color:var(--muted);font-weight:500}
    .cta{display:flex;gap:.5rem;align-items:center}
    .btn{border:1px solid rgba(255,255,255,.14);padding:.55rem .9rem;border-radius:999px;background:rgba(255,255,255,.06);color:var(--fg);text-decoration:none;cursor:pointer}
    .btn:hover{border-color:rgba(255,255,255,.28);background:rgba(255,255,255,.12)}
    .lang{cursor:pointer}

    /* Layout with sticky map */
    main{padding-top:72px}
    .grid{display:grid;grid-template-columns:2fr 1.1fr;gap:22px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
    .sticky{position:sticky;top:88px;height:calc(100vh - 120px)}

    /* Hero */
    .hero{position:relative;min-height:64vh;display:grid;place-items:center;overflow:hidden}
    .stars,.shoot{position:absolute;inset:0;pointer-events:none}
    .stars{background:radial-gradient(2px 2px at 20% 30%,#fff4,transparent),radial-gradient(2px 2px at 80% 20%,#fff4,transparent),radial-gradient(1px 1px at 60% 70%,#fff5,transparent)}
    .shoot{background:repeating-linear-gradient(90deg, transparent 0 98%, #ffffff12 99% 100%);mask-image:linear-gradient(to right, transparent, black 20%, black 80%, transparent);animation:slide 14s linear infinite}
    @keyframes slide{to{transform:translateX(-100%)}}
    .hero-inner{display:grid;gap:1rem;text-align:center;padding:32px 0}
    .kicker{color:var(--accent);font-weight:700;letter-spacing:.12em;text-transform:uppercase}
    h1{margin:0;font-size:clamp(2rem, 4vw + 1rem, 4rem);line-height:1.1}
    .sub{color:var(--muted);font-size:clamp(1rem, .6vw + .9rem, 1.2rem)}
    .hero-actions{display:flex;gap:.8rem;justify-content:center;margin-top:.6rem}
    .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#0b1020;border:none;font-weight:700;box-shadow:0 8px 26px rgba(121,255,215,.25)}

    /* Sections */
    section{padding:32px 0}
    .section-head{display:flex;align-items:end;justify-content:space-between;gap:1rem;margin-bottom:14px}
    .section-head h2{margin:0;font-size:1.4rem}
    .cards{display:grid;grid-template-columns:repeat(3, 1fr);gap:14px}
    @media (max-width:980px){.cards{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg, #16214a 0%, #10183a 100%);border:1px solid #2a3766;border-radius:20px;padding:16px;display:flex;flex-direction:column;gap:12px;box-shadow:0 12px 30px rgba(10,20,45,.25)}
    .card h3{margin:.2rem 0}
    .chiprow{display:flex;flex-wrap:wrap;gap:.5rem}
    .chip{background:var(--chip);border:1px solid #2d3a6a;border-radius:999px;padding:.35rem .7rem;font-size:.92rem;cursor:pointer}
    .chip:hover{background:var(--chip-h);border-color:#3a4c88}
    .tiny{color:var(--muted);font-size:.92rem}

    /* Timeline */
    .timeline{display:flex;gap:10px;overflow:auto;padding:10px;border:1px solid #2a3766;border-radius:14px;background:#0e1736}
    .tick{flex:0 0 auto;padding:.45rem .7rem;border-radius:999px;border:1px solid #335;cursor:pointer}
    .tick.active{border-color:var(--ring);box-shadow:0 0 0 2px #0b1020,0 0 0 4px var(--ring)}

    /* Map */
    #map{width:100%;height:100%;border:1px solid #2a3766;border-radius:16px;box-shadow:0 12px 30px rgba(10,20,45,.25)}

    /* Modal */
    dialog{border:none;border-radius:20px;padding:0;max-width:760px;width:92vw;background:#0f1736;color:#f6f7fb;box-shadow:0 20px 60px rgba(0,0,0,.5)}
    .modal{display:grid;grid-template-columns:1.2fr 1fr}
    @media (max-width:760px){.modal{grid-template-columns:1fr}}
    .modal .media{min-height:220px;background:linear-gradient(135deg,#1e2a5e,#0f1736);display:grid;place-items:center;border-top-left-radius:20px;border-bottom-left-radius:20px}
    .modal .body{padding:18px}
    .modal h4{margin:0 0 .25rem 0;font-size:1.4rem}
    .pill{display:inline-block;border-radius:999px;padding:.25rem .6rem;border:1px solid #3550a8;background:#152254;font-size:.8rem;color:#b6c6ff}
    .wow{margin-top:.6rem;padding:.6rem .7rem;border:1px dashed #2f4db3;border-radius:12px;background:#0e1a41}
    .actions{display:flex;gap:.5rem;margin-top:1rem;flex-wrap:wrap}
    .ghost{background:transparent;border:1px solid #2e3f77;color:#cdd7ff;border-radius:10px;padding:.55rem .75rem;cursor:pointer}
    .solid{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#0b1020;border-radius:10px;padding:.55rem .9rem;cursor:pointer;font-weight:700}

    footer{padding:32px 0;color:#95a6c6;border-top:1px solid #23305d;margin-top:24px}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="logo">‚õØ</span> <span id="brandText">From Stone to Story</span> <small id="brandSmall">Demo</small></div>
      <nav class="cta">
        <button class="btn lang" id="langToggle">EN / KN</button>
        <a class="btn" href="#categories" id="navExplore">Explore</a>
        <a class="btn" href="#vision" id="navVision">Vision</a>
        <a class="btn" href="./home.html">Classic View</a
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Filter Sidebar (fixed) -->
<aside id="filters" class="card" style="position:fixed;left:20px;top:96px;z-index:25;max-width:280px; background:linear-gradient(180deg, #16214a 0%, #10183a 100%);border:1px solid #2a3766;border-radius:16px;padding:14px;box-shadow:0 12px 30px rgba(10,20,45,.25)">
  <h3 style="margin:.2rem 0;font-size:1.05rem">Filters</h3>

  <div class="tiny" style="margin-top:6px">Category</div>
  <div class="chiprow" style="margin-top:6px">
    <button class="chip" data-filter-cat="unesco">UNESCO</button>
    <button class="chip" data-filter-cat="proposed">Proposed</button>
    <button class="chip" data-filter-cat="six">Six Sites</button>
  </div>

  <div class="tiny" style="margin-top:10px">Era</div>
  <div id="eraChips" class="chiprow" style="margin-top:6px"></div>

  <div style="display:flex;gap:8px;margin-top:10px">
    <input id="q" placeholder="Search sites‚Ä¶" style="flex:1;padding:.5rem;border-radius:10px;border:1px solid #2a3766;background:#0e1736;color:#fff"/>
    <button id="clearAll" class="btn">Clear</button>
  </div>
</aside>

    <section class="hero" id="top">
      <div class="stars"></div>
      <div class="shoot"></div>
      <div class="hero-inner">
        <div class="kicker" id="kicker">Karnataka‚Äôs Living Heritage</div>
        <h1 id="headline">What if Karnataka‚Äôs ancient stones could speak?</h1>
        <p class="sub" id="sub">An interactive demo connecting UNESCO marvels, proposed nominations, and six timeless sites‚Äîfrom Banavasi to Bidar‚Äîinto a single story-ready canvas.</p>
        <div class="hero-actions">
          <a class="btn" onclick="playTour('unesco')">Play UNESCO Tour</a>
          <a class="btn primary" href="#categories" id="ctaStart">Start the Journey</a>
          <a class="btn" href="#vision" id="ctaWhy">Why it matters</a>
        </div>
      </div>
    </section>

    <div class="grid">
      <div>
        <section id="categories">
          <div class="section-head">
            <h2 id="gatewayTitle">Three Gateways ¬∑ Multiple Touchpoints</h2>
            <span class="tiny" id="gatewayHint">Click a site chip to open details</span>
          </div>
          <div class="timeline" id="timeline"></div>
          <div class="cards" style="margin-top:14px">
            <article class="card">
              <h3 id="unescoH">UNESCO World Heritage</h3>
              <p class="tiny" id="unescoP">Global treasures that anchor Karnataka on the world map.</p>
              <div class="chiprow">
                <button class="chip" data-key="hampi">Hampi</button>
                <button class="chip" data-key="pattadakal">Pattadakal</button>
                <button class="chip" data-key="western_ghats">Western Ghats (KA)</button>
              </div>
            </article>

            <article class="card">
              <h3 id="propH">Proposed UNESCO Sites</h3>
              <p class="tiny" id="propP">Sites with compelling Outstanding Universal Value.</p>
              <div class="chiprow">
                <button class="chip" data-key="belur">Belur</button>
                <button class="chip" data-key="halebidu">Halebidu</button>
                <button class="chip" data-key="somanathapura">Somanathapura</button>
                <button class="chip" data-key="badami">Badami</button>
                <button class="chip" data-key="aihole">Aihole</button>
                <button class="chip" data-key="bidar">Bidar</button>
              </div>
            </article>

            <article class="card">
              <h3 id="sixH">Six Prehistoric & Heritage Sites</h3>
              <p class="tiny" id="sixP">Living traditions beyond the textbook routes.</p>
              <div class="chiprow">
                <button class="chip" data-key="banavasi">Banavasi</button>
                <button class="chip" data-key="mirjan">Mirjan Fort</button>
                <button class="chip" data-key="balligave">Balligave</button>
                <button class="chip" data-key="brahmagiri">Brahmagiri</button>
                <button class="chip" data-key="kurudumale">Kurudumale</button>
              </div>
            </article>
          </div>
        </section>

        <section id="vision">
          <div class="section-head"><h2 id="visionH">Vision</h2></div>
          <p class="tiny" id="visionP">Scale this demo into a statewide digital atlas: immersive stories, QR-enabled trails, school-ready modules, and circuits that connect monuments with crafts, festivals, cuisine and communities.</p>
        </section>

        <footer>
          ¬© From Stone to Story ‚Ä¢ Demo. For presentation only. Replace with verified content during production.
        </footer>
      </div>

      <aside class="sticky">
        <div id="map" aria-label="Karnataka Heritage Map"></div>
        <div style="margin-top:12px;display:grid;gap:8px">
          <button class="btn" id="viewItinerary">View Itinerary (<span id="circuitCount">0</span>)</button>
          <button class="btn" id="clearItinerary">Clear Itinerary</button>
        </div>
      </aside>
    </div>
  </main>

  <!-- Modal: Site Detail -->
  <dialog id="siteModal">
    <div class="modal">
      <div class="media" id="modalMedia"><img id="modalImg" alt="" style="display:none;width:100%;height:100%;object-fit:cover;border-top-left-radius:20px;border-bottom-left-radius:20px"/></div>
      <div class="body">
        <div class="pill" id="modalCategory">Category</div>
        <h4 id="modalTitle">Title</h4>
        <p id="modalIntro" class="tiny"></p>
        <div class="wow" id="modalWow"></div>
        <canvas id="qr" style="margin-top:10px;border-radius:10px;background:#0b1536"></canvas>
        <div class="actions">
          <button class="ghost" onclick="window.siteModal.close()" id="btnClose">Close</button>
          <a class="solid" id="deepLink" href="#" target="_blank" rel="noopener">Open Deep Link</a>
          <button class="ghost" id="addCircuit">Add to Circuit</button>
        </div>
      </div>
    </div>
  </dialog>

  <!-- Modal: Itinerary -->
  <dialog id="planModal">
    <div class="modal" style="grid-template-columns:1fr 1.2fr">
      <div class="body" style="border-right:1px solid #223264">
        <div class="pill">Itinerary Builder</div>
        <h4 id="planTitle">Your Circuit</h4>
        <ol id="planList" class="tiny" style="margin:0;padding-left:1.2rem"></ol>
        <div class="actions">
          <button class="ghost" id="planUp">Move Up</button>
          <button class="ghost" id="planDown">Move Down</button>
          <button class="ghost" id="planRemove">Remove</button>
          <button class="ghost" id="planClear">Clear</button>
        </div>
      </div>
      <div class="body">
        <div class="pill">Distance Estimate</div>
        <div id="distWrap" class="tiny" style="line-height:1.8;margin-top:.4rem"></div>
        <div class="actions">
          <button class="solid" id="exportJSON">Export .json</button>
          <button class="ghost" id="printPlan">Print / Save PDF</button>
          <button class="ghost" onclick="window.planModal.close()">Close</button>
        </div>
      </div>
    </div>
  </dialog>

  <script>
    const i18n = {
      en:{ brand:"From Stone to Story", demo:"Demo", kicker:"Karnataka‚Äôs Living Heritage", headline:"What if Karnataka‚Äôs ancient stones could speak?", sub:"An interactive demo connecting UNESCO marvels, proposed nominations, and six timeless sites‚Äîfrom Banavasi to Bidar‚Äîinto a single story-ready canvas.", explore:"Explore", vision:"Vision", start:"Start the Journey", why:"Why it matters", gatewayTitle:"Three Gateways ¬∑ Multiple Touchpoints", gatewayHint:"Click a site chip to open details", unescoH:"UNESCO World Heritage", unescoP:"Global treasures that anchor Karnataka on the world map.", propH:"Proposed UNESCO Sites", propP:"Sites with compelling Outstanding Universal Value.", sixH:"Six Prehistoric & Heritage Sites", sixP:"Living traditions beyond the textbook routes.", visionH:"Vision", visionP:"Scale this demo into a statewide digital atlas: immersive stories, QR-enabled trails, school-ready modules, and circuits that connect monuments with crafts, festivals, cuisine and communities.", close:"Close", open:"Open Deep Link", add:"Add to Circuit" },
      kn:{ brand:"‡≤ï‡≤≤‡≥ç‡≤≤‡≤ø‡≤®‡≤ø‡≤Ç‡≤¶ ‡≤ï‡≤•‡≥Ü‡≤ó‡≥Ü", demo:"‡≤°‡≥Ü‡≤Æ‡≥ã", kicker:"‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï‡≤¶ ‡≤ú‡≥Ä‡≤µ‡≤Ç‡≤§ ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü", headline:"‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï‡≤¶ ‡≤™‡≥Å‡≤∞‡≤æ‡≤§‡≤® ‡≤ï‡≤≤‡≥ç‡≤≤‡≥Å‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤æ‡≤§‡≤æ‡≤°‡≤ø‡≤¶‡≤∞‡≥Ü?", sub:"‡≤Ø‡≥Å‡≤®‡≥Ü‡≤∏‡≥ç‡≤ï‡≥ä ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü, ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≤æ‡≤µ‡≤ø‡≤§ ‡≤∏‡≥à‡≤ü‡≥ç‚Äå‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ü‡≤∞‡≥Å ‡≤Ö‡≤Æ‡≤∞‡≤µ‡≤Ç‡≤§ ‡≤∏‡≥ç‡≤•‡≤≥‡≤ó‡≤≥ ‡≤ï‡≤•‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤™‡≤∞‡≤¶‡≥Ü‡≤ó‡≥Ü ‡≤§‡≤∞‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≥Å‡≤µ ‡≤∏‡≤Ç‡≤µ‡≤π‡≤®‡≤æ‡≤§‡≥ç‡≤Æ‡≤ï ‡≤°‡≥Ü‡≤Æ‡≥ã.", explore:"‡≤Ö‡≤®‡≥ç‡≤µ‡≥á‡≤∑‡≤ø‡≤∏‡≤ø", vision:"‡≤¶‡≥É‡≤∑‡≥ç‡≤ü‡≤ø", start:"‡≤Ø‡≤æ‡≤§‡≥ç‡≤∞‡≥Ü ‡≤Ü‡≤∞‡≤Ç‡≤≠‡≤ø‡≤∏‡≤ø", why:"‡≤è‡≤ï‡≥Ü ‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø?", gatewayTitle:"‡≤Æ‡≥Ç‡≤∞‡≥Å ‡≤¶‡≥ç‡≤µ‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å ¬∑ ‡≤Ö‡≤®‡≥á‡≤ï ‡≤∏‡≥ç‡≤™‡≤∞‡≥ç‡≤∂ ‡≤¨‡≤ø‡≤Ç‡≤¶‡≥Å‡≤ó‡≤≥‡≥Å", gatewayHint:"‡≤µ‡≤ø‡≤µ‡≤∞ ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤∏‡≥ç‡≤•‡≤≥‡≤¶ ‡≤ö‡≤ø‡≤™‡≥ç ‡≤ï‡≥ç‡≤≤‡≤ø‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", unescoH:"‡≤Ø‡≥Å‡≤®‡≥Ü‡≤∏‡≥ç‡≤ï‡≥ä ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü", unescoP:"‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ ‡≤®‡≤ï‡≥ç‡≤∑‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≥Å‡≤µ ‡≤ï‡≤≤‡≥Ü‡≤Æ‡≤æ‡≤§‡≥Å‡≤ó‡≤≥‡≥Å.", propH:"‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≤æ‡≤µ‡≤ø‡≤§ ‡≤Ø‡≥Å‡≤®‡≥Ü‡≤∏‡≥ç‡≤ï‡≥ä ‡≤∏‡≥à‡≤ü‡≥ç‚Äå‡≤ó‡≤≥‡≥Å", propP:"‡≤Ö‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ‡≤Æ‡≤ü‡≥ç‡≤ü‡≤¶ ‡≤Æ‡≥å‡≤≤‡≥ç‡≤Ø ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ ‡≤∏‡≥ç‡≤•‡≤≥‡≤ó‡≤≥‡≥Å.", sixH:"‡≤Ü‡≤∞‡≥Å ‡≤™‡≥Å‡≤∞‡≤æ‡≤§‡≤®/‡≤™‡≤æ‡≤∞‡≤Ç‡≤™‡≤∞‡≤ø‡≤ï ‡≤∏‡≥ç‡≤•‡≤≥‡≤ó‡≤≥‡≥Å", sixP:"‡≤™‡≤†‡≥ç‡≤Ø‡≤™‡≥Å‡≤∏‡≥ç‡≤§‡≤ï ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤ó‡≤≥‡≤æ‡≤ö‡≥Ü‡≤ó‡≥Ü ‡≤ú‡≥Ä‡≤µ‡≤Ç‡≤§ ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü.", visionH:"‡≤¶‡≥É‡≤∑‡≥ç‡≤ü‡≤ø", visionP:"‡≤à ‡≤°‡≥Ü‡≤Æ‡≥ã‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∞‡≤æ‡≤ú‡≥ç‡≤Ø‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≤ø ‡≤°‡≤ø‡≤ú‡≤ø‡≤ü‡≤≤‡≥ç ‡≤Ö‡≤ü‡≥ç‡≤≤‡≤∏‡≥ç ‡≤Ü‡≤ó‡≤ø ‡≤µ‡≤ø‡≤∏‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≤ø: QR ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤ó‡≤≥‡≥Å, ‡≤∂‡≤æ‡≤≤‡≤æ ‡≤Æ‡≤æ‡≤°‡≥ç‡≤Ø‡≥Ç‡≤≤‡≥ç‚Äå‡≤ó‡≤≥‡≥Å, ‡≤â‡≤¶‡≥ç‡≤Ø‡≤Æ-‡≤∏‡≤Ç‡≤∏‡≥ç‡≤ï‡≥É‡≤§‡≤ø ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ó‡≤≥‡≥Å.", close:"‡≤Æ‡≥Å‡≤ö‡≥ç‡≤ö‡≤ø", open:"‡≤°‡≥Ä‡≤™‡≥ç ‡≤≤‡≤ø‡≤Ç‡≤ï‡≥ç ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", add:"‡≤∏‡≤∞‡≥ç‡≤ï‡≥ç‡≤Ø‡≥Ç‡≤ü‡≤ø‡≤ó‡≥Ü ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø" }
    };

    const sites = {
      hampi:{title:{en:"Hampi ‚Äî Vijayanagara‚Äôs open‚Äëair museum",kn:"‡≤π‡≤Ç‡≤™‡≤ø ‚Äî ‡≤µ‡≤ø‡≤ú‡≤Ø‡≤®‡≤ó‡≤∞‡≤¶ ‡≤Æ‡≥Å‡≤ï‡≥ç‡≤§‡≤æ‡≤≤‡≤Ø"},cat:"UNESCO",intro:{en:"Granite boulders, royal enclosures and markets once buzzing with global trade.",kn:"‡≤ó‡≥ç‡≤∞‡≤æ‡≤®‡≥à‡≤ü‡≥ç ‡≤ó‡≥Å‡≤°‡≥ç‡≤°‡≤ó‡≤≥‡≥Å, ‡≤Ö‡≤∞‡≤Æ‡≤®‡≥Ü ‡≤µ‡≤≤‡≤Ø‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≤æ‡≤ó‡≤§‡≤ø‡≤ï ‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≤æ‡≤∞‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ï‡≥Ç‡≤ó‡≤ø‡≤¶ ‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å."},wow:{en:"At its peak, Hampi was among the world‚Äôs richest cities; 1,600+ protected monuments.",kn:"‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤®‡≥ç‡≤®‡≤§‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤π‡≤Ç‡≤™‡≤ø ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤Ø‡≥á ‡≤∂‡≥ç‡≤∞‡≥Ä‡≤Æ‡≤Ç‡≤§ ‡≤®‡≤ó‡≤∞‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤í‡≤Ç‡≤¶‡≤æ‡≤ó‡≤ø‡≤§‡≥ç‡≤§‡≥Å; 1,600+ ‡≤∏‡≤Ç‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§ ‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≤ï‡≤ó‡≤≥‡≥Å."}, emoji:"üèØ", ll:[15.335,76.462], periods:["Vijayanagara"], img:null},
      pattadakal:{title:{en:"Pattadakal ‚Äî A school of temples",kn:"‡≤™‡≤ü‡≥ç‡≤ü‡≤¶‡≤ï‡≤≤‡≥ç‡≤≤‡≥Å ‚Äî ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤ó‡≤≥ ‡≤™‡≤æ‡≤†‡≤∂‡≤æ‡≤≤‡≥Ü"},cat:"UNESCO",intro:{en:"A living gallery where northern and southern styles meet.",kn:"‡≤â‡≤§‡≥ç‡≤§‡≤∞-‡≤¶‡≤ï‡≥ç‡≤∑‡≤ø‡≤£ ‡≤∂‡≥à‡≤≤‡≤ø‡≤ó‡≤≥‡≥Å ‡≤∏‡≥á‡≤∞‡≥Å‡≤µ ‡≤ú‡≥Ä‡≤µ‡≤Ç‡≤§ ‡≤ó‡≥ç‡≤Ø‡≤æ‡≤≤‡≤∞‡≤ø."},wow:{en:"Nine major temples fuse Nagara & Dravida in one complex.",kn:"‡≤í‡≤Ç‡≤¶‡≥á ‡≤∏‡≤Æ‡≥Å‡≤ö‡≥ç‡≤ö‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤æ‡≤ó‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤¶‡≥ç‡≤∞‡≤æ‡≤µ‡≤ø‡≤° ‡≤∂‡≥à‡≤≤‡≤ø‡≤ó‡≤≥ ‡≤∏‡≤Ç‡≤Ø‡≥ã‡≤ú‡≤®‡≥Ü."}, emoji:"üõï", ll:[15.947,75.815], periods:["Early Chalukya"], img:null},
      western_ghats:{title:{en:"Western Ghats (Karnataka)",kn:"‡≤™‡≤∂‡≥ç‡≤ö‡≤ø‡≤Æ ‡≤ò‡≤ü‡≥ç‡≤ü (‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï)"},cat:"UNESCO-Natural",intro:{en:"Mist forests, sacred groves and biodiversity corridors.",kn:"‡≤Æ‡≤Ç‡≤ú‡≥Å ‡≤ï‡≤æ‡≤°‡≥Å‡≤ó‡≤≥‡≥Å, ‡≤¶‡≥á‡≤µ‡≤∞ ‡≤ï‡≤æ‡≤°‡≥Å‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≥à‡≤µ‡≤ø‡≤ï ‡≤µ‡≥à‡≤µ‡≤ø‡≤ß‡≥ç‡≤Ø ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤ó‡≤≥‡≥Å."},wow:{en:"One of the world‚Äôs biodiversity hotspots with high endemism.",kn:"‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ‡≤¶ ‡≤™‡≥ç‡≤∞‡≤Æ‡≥Å‡≤ñ ‡≤ú‡≥à‡≤µ ‡≤µ‡≥à‡≤µ‡≤ø‡≤ß‡≥ç‡≤Ø ‡≤π‡≤æ‡≤ü‡≥ç‚Äå‡≤∏‡≥ç‡≤™‡≤æ‡≤ü‡≥ç‚Äå‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤í‡≤Ç‡≤¶‡≥Å."}, emoji:"üåø", ll:[13.5,75.0], periods:["Natural"], img:null},

      belur:{title:{en:"Belur ‚Äî Hoysala artistry in soapstone",kn:"‡≤¨‡≥Ü‡≤≥‡≥Ç‡≤∞‡≥Å ‚Äî ‡≤π‡≥ä‡≤Ø‡≥ç‡≤∏‡≤≥‡≤∞ ‡≤∏‡≥ã‡≤™‡≥ç‚Äå‡≤∏‡≥ç‡≤ü‡≥ã‡≤®‡≥ç ‡≤ï‡≤≤‡≤æ"},cat:"Proposed",intro:{en:"Stories carved in stone: dancers, epics, daily life.",kn:"‡≤ï‡≤≤‡≥ç‡≤≤‡≤ø‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤§‡≥ç‡≤§‡≤ø‡≤¶ ‡≤ï‡≤•‡≥Ü‡≤ó‡≤≥‡≥Å: ‡≤®‡≥É‡≤§‡≥ç‡≤Ø, ‡≤™‡≥Å‡≤∞‡≤æ‡≤£, ‡≤¶‡≤ø‡≤®‡≤ú‡≥Ä‡≤µ‡≤®."},wow:{en:"Star‚Äëplan shrines with lace‚Äëlike detailing.",kn:"‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞ ‡≤Ø‡≥ã‡≤ú‡≤®‡≥Ü‡≤Ø ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤ó‡≤≥‡≥Å ‚Äî ‡≤≤‡≥á‡≤∏‡≥ç‚Äå‡≤®‡≤Ç‡≤§‡≤π ‡≤µ‡≤ø‡≤µ‡≤∞‡≤ó‡≤≥‡≥Å."}, emoji:"üóø", ll:[13.165,75.865], periods:["Hoysala"], img:null},
      halebidu:{title:{en:"Halebidu ‚Äî The jewel of the Hoysalas",kn:"‡≤π‡≤≥‡≥Ü‡≤¨‡≥Ä‡≤°‡≥Å ‚Äî ‡≤π‡≥ä‡≤Ø‡≥ç‡≤∏‡≤≥‡≤∞ ‡≤Æ‡≤£‡≤ø"},cat:"Proposed",intro:{en:"Mythic friezes unfurl like graphic novels.",kn:"‡≤™‡≥å‡≤∞‡≤æ‡≤£‡≤ø‡≤ï ‡≤´‡≥ç‡≤∞‡≥Ä‡≤ú‡≥ç‚Äå‡≤ó‡≤≥‡≥Å ‡≤ó‡≥ç‡≤∞‡≤æ‡≤´‡≤ø‡≤ï‡≥ç ‡≤ï‡≤æ‡≤¶‡≤Ç‡≤¨‡≤∞‡≤ø‡≤Ø‡≤Ç‡≤§‡≥Ü ‡≤π‡≤∞‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤µ‡≥Ü."},wow:{en:"Continuous narrative bands wrap the base for hundreds of feet.",kn:"‡≤®‡≥Ç‡≤∞‡≤æ‡≤∞‡≥Å ‡≤Ö‡≤°‡≤ø ‡≤µ‡≤ø‡≤∏‡≥ç‡≤§‡≤æ‡≤∞‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤ø‡≤∞‡≤Ç‡≤§‡≤∞ ‡≤ï‡≤•‡≤æ‡≤¨‡≥ç‡≤Ø‡≤æ‡≤Ç‡≤°‡≥ç‚Äå‡≤ó‡≤≥‡≥Å."}, emoji:"üíé", ll:[13.208,75.99], periods:["Hoysala"], img:null},
      somanathapura:{title:{en:"Somanathapura ‚Äî Kesava temple",kn:"‡≤∏‡≥ã‡≤Æ‡≤®‡≤æ‡≤•‡≤™‡≥Å‡≤∞ ‚Äî ‡≤ï‡≥á‡≤∂‡≤µ ‡≤¶‡≥á‡≤µ‡≤∏‡≥ç‡≤•‡≤æ‡≤®"},cat:"Proposed",intro:{en:"Perfect geometry meets lyrical sculpture.",kn:"‡≤∏‡≥Ç‡≤ï‡≥ç‡≤∑‡≥ç‡≤Æ ‡≤ú‡≥ç‡≤Ø‡≤æ‡≤Æ‡≤ø‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≤Ç‡≤ó‡≥Ä‡≤§‡≤æ‡≤§‡≥ç‡≤Æ‡≤ï ‡≤∂‡≤ø‡≤≤‡≥ç‡≤™."},wow:{en:"Exemplar of stellate Hoysala plan.",kn:"‡≤∏‡≥ç‡≤ü‡≥Ü‡≤≤‡≥ç‡≤≤‡≥á‡≤ü‡≥ç ‡≤π‡≥ä‡≤Ø‡≥ç‡≤∏‡≤≥ ‡≤Ø‡≥ã‡≤ú‡≤®‡≥Ü‡≤Ø ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤â‡≤¶‡≤æ‡≤π‡≤∞‡≤£‡≥Ü."}, emoji:"üìê", ll:[12.201,76.654], periods:["Hoysala"], img:null},
      badami:{title:{en:"Badami ‚Äî Sandstone caves & royal memories",kn:"‡≤¨‡≤æ‡≤¶‡≤æ‡≤Æ‡≤ø ‚Äî ‡≤Æ‡≤∞‡≤≥‡≥Å‡≤ó‡≤≤‡≥ç‡≤≤‡≤ø‡≤® ‡≤ó‡≥Å‡≤π‡≥Ü‡≤ó‡≤≥‡≥Å"},cat:"Proposed",intro:{en:"Rock‚Äëcut sanctuaries over an ancient tank.",kn:"‡≤™‡≥ç‡≤∞‡≤æ‡≤ö‡≥Ä‡≤® ‡≤ï‡≥Ü‡≤∞‡≥Ü‡≤Ø ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≤≤‡≥ç‡≤≤‡≥Å ‡≤ï‡≤§‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤ó‡≥Å‡≤π‡≤ó‡≤≥‡≥Å."},wow:{en:"Early Chalukya cave art with inscriptions.",kn:"‡≤Ü‡≤¶‡≤ø‡≤ï‡≤æ‡≤≤‡≤¶ ‡≤ö‡≤æ‡≤≤‡≥Å‡≤ï‡≥ç‡≤Ø ‡≤ó‡≥Å‡≤π‡≤æ‡≤∂‡≤ø‡≤≤‡≥ç‡≤™ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∂‡≤æ‡≤∏‡≤®‡≤ó‡≤≥‡≥Å."}, emoji:"üï≥Ô∏è", ll:[15.918,75.676], periods:["Early Chalukya"], img:null},
      aihole:{title:{en:"Aihole ‚Äî Cradle of temple architecture",kn:"‡≤ê‡≤π‡≥ä‡≤≥‡≥Ü ‚Äî ‡≤¶‡≥á‡≤ó‡≥Å‡≤≤ ‡≤µ‡≤æ‡≤∏‡≥ç‡≤§‡≥Å‡≤∂‡≤ø‡≤≤‡≥ç‡≤™‡≤¶ ‡≤§‡≥ä‡≤ü‡≥ç‡≤ü‡≤ø‡≤≤‡≥Å"},cat:"Proposed",intro:{en:"An experimental lab of early forms.",kn:"‡≤Ü‡≤¶‡≤ø ‡≤∞‡≥Ç‡≤™‡≤ó‡≤≥ ‡≤™‡≥ç‡≤∞‡≤Ø‡≥ã‡≤ó‡≤æ‡≤≤‡≤Ø."},wow:{en:"100+ temples in a compact landscape.",kn:"‡≤í‡≤Ç‡≤¶‡≥Å ‡≤∏‡≤Ç‡≤ï‡≥Ä‡≤∞‡≥ç‡≤£ ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂‡≤¶‡≤≤‡≥ç‡≤≤‡≥á 100+ ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤ó‡≤≥‡≥Å."}, emoji:"üè∫", ll:[16.018,75.883], periods:["Early Chalukya"], img:null},
      bidar:{title:{en:"Bidar ‚Äî Forts, fountains & Sufi routes",kn:"‡≤¨‡≥Ä‡≤¶‡≤∞‡≥ç ‚Äî ‡≤ï‡≥ã‡≤ü‡≥Ü, ‡≤ï‡≤æ‡≤∞‡≥á‡≤ú‡≥ç ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≥Ç‡≤´‡≤ø ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤ó‡≤≥‡≥Å"},cat:"Proposed/Six",intro:{en:"Deccan‚Äôs Persianate capital with living crafts.",kn:"‡≤™‡≤∞‡≥ç‡≤∑‡≤ø‡≤Ø‡≤®‡≥ç ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤¶ ‡≤¶‡≤ï‡≥ç‡≤∑‡≤ø‡≤£‡≤¶ ‡≤∞‡≤æ‡≤ú‡≤ß‡≤æ‡≤®‡≤ø ‚Äî ‡≤ú‡≥Ä‡≤µ‡≤Ç‡≤§ ‡≤π‡≤∏‡≥ç‡≤§‡≤ï‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å."},wow:{en:"Ingenious karez aqueduct & world‚Äëfamous Bidriware.",kn:"‡≤Ö‡≤¶‡≥ç‡≤≠‡≥Å‡≤§ ‡≤ï‡≤æ‡≤∞‡≥á‡≤ú‡≥ç ‡≤ú‡≤≤‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ ‡≤™‡≥ç‡≤∞‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß ‡≤¨‡≥Ä‡≤¶‡≥ç‡≤∞‡≤ø‡≤µ‡≥á‡≤∞‡≥ç."}, emoji:"üïå", ll:[17.913,77.529], periods:["Bahmani/Adil Shahi"], img:null},

      banavasi:{title:{en:"Banavasi ‚Äî Karnataka‚Äôs oldest capital",kn:"‡≤¨‡≤®‡≤µ‡≤æ‡≤∏‡≤ø ‚Äî ‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï‡≤¶ ‡≤Ö‡≤§‡≤ø ‡≤π‡≤≥‡≥Ü‡≤Ø ‡≤∞‡≤æ‡≤ú‡≤ß‡≤æ‡≤®‡≤ø"},cat:"Six",intro:{en:"Kadamba legacy, theatre traditions & inscriptions.",kn:"‡≤ï‡≤¶‡≤Ç‡≤¨ ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü, ‡≤∞‡≤Ç‡≤ó ‡≤™‡≤∞‡≤Ç‡≤™‡≤∞‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∂‡≤æ‡≤∏‡≤®‡≤ó‡≤≥‡≥Å."},wow:{en:"Coins of Vasu Deva; celebrated in classical literature.",kn:"‡≤µ‡≤∏‡≥Å ‡≤¶‡≥á‡≤µ‡≤® ‡≤®‡≤æ‡≤£‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å; ‡≤∂‡≤æ‡≤∏‡≥ç‡≤§‡≥ç‡≤∞‡≥Ä‡≤Ø ‡≤∏‡≤æ‡≤π‡≤ø‡≤§‡≥ç‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤™‡≥ç‡≤∞‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß."}, emoji:"üìú", ll:[14.615,74.85], periods:["Kadamba/Ancient"], img:null},
      mirjan:{title:{en:"Mirjan Fort ‚Äî Pepper & the queen‚Äôs bastion",kn:"‡≤Æ‡≤ø‡≤∞‡≥ç‡≤ú‡≤®‡≥ç ‡≤ï‡≥ã‡≤ü‡≥Ü ‚Äî ‡≤Æ‡≥Ü‡≤£‡≤∏‡≤ø‡≤® ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤æ‡≤£‡≤ø‡≤Ø ‡≤ó‡≥ã‡≤°‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø"},cat:"Six",intro:{en:"Laterite ramparts tied to the spice trade.",kn:"‡≤Æ‡≤∏‡≤æ‡≤≤‡≥Ü ‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≤æ‡≤∞‡≤¶‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤¨‡≤Ç‡≤ß ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤¶ ‡≤≤‡≥ç‡≤Ø‡≤æ‡≤ü‡≤∞‡≥à‡≤ü‡≥ç ‡≤ó‡≥ã‡≤°‡≥Ü‡≤ó‡≤≥‡≥Å."},wow:{en:"Legends of Rani Chennabhairadevi & secret passages.",kn:"‡≤∞‡≤æ‡≤£‡≤ø ‡≤ö‡≥Ü‡≤®‡≥ç‡≤®‡≤≠‡≥à‡≤∞ ‡≤¶‡≥á‡≤µ‡≤ø‡≤Ø ‡≤ï‡≤§‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ó‡≥Å‡≤™‡≥ç‡≤§ ‡≤¶‡≤æ‡≤∞‡≤ø‡≤ó‡≤≥‡≥Å."}, emoji:"üß≠", ll:[14.498,74.423], periods:["Medieval/Maritime"], img:null},
      balligave:{title:{en:"Balligave ‚Äî Artisans & inscriptions",kn:"‡≤¨‡≤≥‡≥ç‡≤≥‡≤ø‡≤ó‡≤æ‡≤µ‡≥á ‚Äî ‡≤∂‡≤ø‡≤≤‡≥ç‡≤™‡≤ø‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∂‡≤æ‡≤∏‡≤®‡≤ó‡≤≥‡≥Å"},cat:"Six",intro:{en:"Guilds and early medieval workshops.",kn:"‡≤ó‡≥Å‡≤ø‡≤≤‡≥ç‡≤°‡≥Å‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≤ß‡≥ç‡≤Ø‡≤ï‡≤æ‡≤≤‡≥Ä‡≤® ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ó‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å."},wow:{en:"Inscriptional hub noted for craft and learning.",kn:"‡≤ï‡≤≤‡≤æ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤ß‡≥ç‡≤Ø‡≤Ø‡≤®‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤ñ‡≥ç‡≤Ø‡≤æ‡≤§ ‡≤∂‡≤æ‡≤∏‡≤® ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞."}, emoji:"üîß", ll:[14.238,75.348], periods:["Western Chalukya"], img:null},
      brahmagiri:{title:{en:"Brahmagiri ‚Äî From megaliths to Ashoka",kn:"‡≤¨‡≥ç‡≤∞‡≤π‡≥ç‡≤Æ‡≤ó‡≤ø‡≤∞‡≤ø ‚Äî ‡≤Æ‡≤π‡≤æ‡≤∂‡≤ø‡≤≤‡≥Ü‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤Ö‡≤∂‡≥ã‡≤ï‡≤® ‡≤§‡≤®‡≤ï"},cat:"Six",intro:{en:"Prehistory meets Mauryan edicts.",kn:"‡≤™‡≥Ç‡≤∞‡≥ç‡≤µ‡≥à‡≤§‡≤ø‡≤π‡≤æ‡≤∏‡≤ø‡≤ï ‡≤ï‡≤æ‡≤≤ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≥å‡≤∞‡≥ç‡≤Ø ‡≤∂‡≤æ‡≤∏‡≤®‡≤ó‡≤≥ ‡≤∏‡≤Ç‡≤ó‡≤Æ."},wow:{en:"Megalithic burials & Ashokan inscription in one landscape.",kn:"‡≤í‡≤Ç‡≤¶‡≥á ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Æ‡≤π‡≤æ‡≤∂‡≤ø‡≤≤ ‡≤∏‡≤Æ‡≤æ‡≤ß‡≤ø‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤∂‡≥ã‡≤ï ‡≤∂‡≤æ‡≤∏‡≤®."}, emoji:"‚õ∞Ô∏è", ll:[14.6,76.4], periods:["Prehistory/Mauryan"], img:null},
      kurudumale:{title:{en:"Kurudumale ‚Äî Monolithic Ganesha",kn:"‡≤ï‡≥Å‡≤∞‡≥Å‡≤¶‡≥Å‡≤Æ‡≤≤‡≥á ‚Äî ‡≤è‡≤ï‡≤∂‡≤ø‡≤≤ ‡≤ó‡≤£‡≥á‡≤∂"},cat:"Six",intro:{en:"Open‚Äëfield shrine linked to master sculptors.",kn:"‡≤Æ‡≤π‡≤æ‡≤®‡≥ç ‡≤∂‡≤ø‡≤≤‡≥ç‡≤™‡≤ø‡≤ó‡≤≥‡≥ä‡≤°‡≤®‡≥Ü ‡≤∏‡≤Ç‡≤¨‡≤Ç‡≤ß‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤Æ‡≥Å‡≤ï‡≥ç‡≤§ ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤¶ ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø."},wow:{en:"Colossal single‚Äëstone Ganesha; Jakkanachari lore.",kn:"‡≤ó‡≤ó‡≤®‡≤ö‡≥Å‡≤Ç‡≤¨‡≤ø ‡≤è‡≤ï‡≤∂‡≤ø‡≤≤ ‡≤ó‡≤£‡≥á‡≤∂ ‚Äî ‡≤ú‡≤ï‡≥ç‡≤ï‡≤£‡≤æ‡≤ö‡≤æ‡≤∞‡≥ç‡≤Ø ‡≤ï‡≤§‡≥Ü."}, emoji:"üêò", ll:[13.164,78.381], periods:["Vijayanagara"], img:null}
    };

    const periods = ["Prehistory/Mauryan","Kadamba/Ancient","Early Chalukya","Western Chalukya","Hoysala","Vijayanagara","Bahmani/Adil Shahi","Medieval/Maritime","Natural"];

    let LANG = 'en';
    const $ = (q)=>document.querySelector(q);

    function setLang(lang){
      LANG = lang;
      const t = i18n[LANG];
      $('#brandText').textContent = t.brand; $('#brandSmall').textContent = t.demo;
      $('#kicker').textContent = t.kicker; $('#headline').textContent = t.headline; $('#sub').textContent = t.sub;
      $('#navExplore').textContent = t.explore; $('#navVision').textContent = t.vision; $('#ctaStart').textContent = t.start; $('#ctaWhy').textContent = t.why;
      $('#gatewayTitle').textContent = t.gatewayTitle; $('#gatewayHint').textContent = t.gatewayHint;
      $('#unescoH').textContent = t.unescoH; $('#unescoP').textContent = t.unescoP;
      $('#propH').textContent = t.propH; $('#propP').textContent = t.propP;
      $('#sixH').textContent = t.sixH; $('#sixP').textContent = t.sixP;
      $('#visionH').textContent = t.visionH; $('#visionP').textContent = t.visionP;
      $('#btnClose').textContent = t.close; $('#deepLink').textContent = t.open; $('#addCircuit').textContent = t.add;
    }

    const tWrap = document.getElementById('timeline');
    periods.forEach(p=>{
      const b = document.createElement('button');
      b.className = 'tick'; b.textContent = p; b.onclick = ()=>filterByPeriod(p,b);
      tWrap.appendChild(b);
    });

    function filterByPeriod(p, btn){
      document.querySelectorAll('.tick').forEach(n=>n.classList.remove('active')); btn.classList.add('active');
      document.querySelectorAll('.chip').forEach(ch=>{
        const s = sites[ch.dataset.key];
        ch.style.opacity = s && s.periods.includes(p) ? '1' : '.35';
      });
    }

    const map = L.map('map', {zoomControl:true}).setView([14.5, 75.5], 6.6);
    <script>
// ===== CLUSTER + MARKERS =====
const markers = {}; // key -> marker
const cluster = L.markerClusterGroup({
  showCoverageOnHover: false,
  spiderfyOnMaxZoom: true,
  disableClusteringAtZoom: 9
});
map.addLayer(cluster);

function getPrimaryCat(s){ return (s.cat || '').toLowerCase().split('/')[0]; }

function addMarker(k, s){
  const m = L.marker(s.ll);
  m.on('click', ()=> openSite(k));
  m.bindTooltip(s.title[LANG] || s.title.en);
  <script>
// ===== FILTERS + SEARCH =====
const filterState = { cat: new Set(), eras: new Set(), q: '' };

// Build era chips from your existing `periods` array
document.getElementById('eraChips').innerHTML =
  periods.map(e=>`<button class="chip era" data-era="${e}">${e}</button>`).join('');

// Category chips
document.querySelectorAll('[data-filter-cat]').forEach(b => {
  b.addEventListener('click', () => {
    const key = b.getAttribute('data-filter-cat');
    if (filterState.cat.has(key)) { filterState.cat.delete(key); b.classList.remove('active'); }
    else { filterState.cat.add(key); b.classList.add('active'); }
    applyFilters();
  });
});

// Era chips
document.querySelectorAll('.chip.era').forEach(b=>{
  b.addEventListener('click', ()=>{
    const e = b.dataset.era;
    if (filterState.eras.has(e)) { filterState.eras.delete(e); b.classList.remove('active'); }
    else { filterState.eras.add(e); b.classList.add('active'); }
    applyFilters();
  });
});

// Search
document.getElementById('q').addEventListener('input', (e)=>{
  filterState.q = e.target.value.toLowerCase();
  applyFilters();
});

// Clear all
document.getElementById('clearAll').addEventListener('click', ()=>{
  filterState.cat.clear();
  filterState.eras.clear();
  filterState.q = '';
  document.querySelectorAll('[data-filter-cat], .chip.era').forEach(n=> n.classList.remove('active'));
  document.getElementById('q').value = '';
  applyFilters();
});

// Helper
function passes(s){
  const catOK = !filterState.cat.size || filterState.cat.has(getPrimaryCat(s));
  const eraOK = !filterState.eras.size || s.periods.some(p => filterState.eras.has(p));
  const q = filterState.q;
  const qOK = !q || ((s.title?.en||'').toLowerCase().includes(q) || (s.intro?.en||'').toLowerCase().includes(q));
  return catOK && eraOK && qOK;
}

// Apply: hide/show chips and rebuild cluster
function applyFilters(){
  // Chips in category cards
  document.querySelectorAll('.chip[data-key]').forEach(ch=>{
    const s = sites[ch.dataset.key];
    ch.style.display = passes(s) ? '' : 'none';
  });

  // Map cluster
  cluster.clearLayers();
  for (const [k, s] of Object.entries(sites)){
    if (passes(s) && markers[k]) cluster.addLayer(markers[k]);
  }

  // URL state
  const params = new URLSearchParams(location.search);
  params.set('lang', LANG);
  filterState.cat.size ? params.set('cat', Array.from(filterState.cat).join(',')) : params.delete('cat');
  filterState.eras.size ? params.set('era', Array.from(filterState.eras).join(',')) : params.delete('era');
  filterState.q ? params.set('q', filterState.q) : params.delete('q');
  history.replaceState(null, '', location.pathname + '?' + params.toString() + location.hash);
}

// Initialize from URL (shareable views)
(function initFromUrl(){
  const u = new URL(location.href);
  const cats = (u.searchParams.get('cat')||'').split(',').filter(Boolean);
  const eras = (u.searchParams.get('era')||'').split(',').filter(Boolean);
  const q = u.searchParams.get('q')||'';
  cats.forEach(c => { const btn = document.querySelector(`[data-filter-cat="${c}"]`); if(btn){ filterState.cat.add(c); btn.classList.add('active'); } });
  eras.forEach(e => { const btn = document.querySelector(`.chip.era[data-era="${e}"]`); if(btn){ filterState.eras.add(e); btn.classList.add('active'); } });
  if(q){ filterState.q = q.toLowerCase(); const iq=document.getElementById('q'); iq.value = q; }
  applyFilters();
})();
  <script>
// ===== AUTOPLAY TOUR =====
const tours = {
  unesco: [
    { key:'hampi',         zoom:7.3, delay:1500 },
    { key:'pattadakal',    zoom:7.7, delay:1500 },
    { key:'western_ghats', zoom:6.6, delay:1600 }
  ]
};
function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

async function playTour(id){
  const steps = tours[id]; if(!steps) return;
  // ensure filters won't hide steps during tour
  const clearBtn = document.getElementById('clearAll');
  if (clearBtn) clearBtn.click();

  for (const step of steps){
    const s = sites[step.key]; if(!s) continue;
    map.flyTo(s.ll, step.zoom, { duration: 1.2, easeLinearity: 0.25 });
    await sleep(800);
    openSite(step.key);
    await sleep(step.delay);
  }
}
</script>

</script>

  // Helper: does a site pass current filters?
function passes(s){
  const catOK = !filterState.cat.size || filterState.cat.has(getPrimaryCat(s));
  const eraOK = !filterState.eras.size || s.periods.some(p => filterState.eras.has(p));
  const q = filterState.q;
  const qOK = !q || ((s.title?.en||'').toLowerCase().includes(q) || (s.intro?.en||'').toLowerCase().includes(q));
  return catOK && eraOK && qOK;
}

// Apply filters: hide/show chips + rebuild marker cluster + push URL state
function applyFilters(){
  // Chips in the three category cards
  document.querySelectorAll('.chip[data-key]').forEach(ch=>{
    const s = sites[ch.dataset.key];
    ch.style.display = passes(s) ? '' : 'none';
  });

  // Map cluster
  cluster.clearLayers();
  for (const [k, s] of Object.entries(sites)){
    if (passes(s) && markers[k]) cluster.addLayer(markers[k]);
  }

  // URL state (shareable)
  const params = new URLSearchParams(location.search);
  params.set('lang', LANG);
  filterState.cat.size ? params.set('cat', Array.from(filterState.cat).join(',')) : params.delete('cat');
  filterState.eras.size ? params.set('era', Array.from(filterState.eras).join(',')) : params.delete('era');
  filterState.q ? params.set('q', filterState.q) : params.delete('q');
  history.replaceState(null, '', location.pathname + '?' + params.toString() + location.hash);
}

// Initialize from URL on load
(function initFromUrl(){
  const u = new URL(location.href);
  const cats = (u.searchParams.get('cat')||'').split(',').filter(Boolean);
  const eras = (u.searchParams.get('era')||'').split(',').filter(Boolean);
  const q = u.searchParams.get('q')||'';
  cats.forEach(c => { const btn = document.querySelector(`[data-filter-cat="${c}"]`); if(btn){ filterState.cat.add(c); btn.classList.add('active'); } });
  eras.forEach(e => { const btn = document.querySelector(`.chip.era[data-era="${e}"]`); if(btn){ filterState.eras.add(e); btn.classList.add('active'); } });
  if(q){ filterState.q = q.toLowerCase(); const iq=document.getElementById('q'); iq.value = q; }
  applyFilters();
})();

  // ===== AUTOPLAY TOUR =====
const tours = {
  unesco: [
    { key:'hampi',         zoom:7.3, delay:1500 },
    { key:'pattadakal',    zoom:7.7, delay:1500 },
    { key:'western_ghats', zoom:6.6, delay:1600 }
  ]
};
function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

async function playTour(id){
  const steps = tours[id]; if(!steps) return;
  // clear filters so nothing is hidden during the tour
  const clearBtn = document.getElementById('clearAll');
  if (clearBtn) clearBtn.click();

  for (const step of steps){
    const s = sites[step.key]; if(!s) continue;
    map.flyTo(s.ll, step.zoom, { duration: 1.2, easeLinearity: 0.25 });
    await sleep(800);
    openSite(step.key);
    await sleep(step.delay);
  }
}

  markers[k] = m;
  cluster.addLayer(m);
}

// (re)populate markers initially
cluster.clearLayers();
Object.entries(sites).forEach(([k,s])=> addMarker(k,s));
    
</script>
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'¬© OSM' }).addTo(map);

    function addMarker(k, s){
      const m = L.marker(s.ll).addTo(map);
      m.on('click', ()=> openSite(k));
      m.bindTooltip(s.title[LANG] || s.title.en);
    }
    Object.entries(sites).forEach(([k,s])=> addMarker(k,s));

    const modal = document.getElementById('siteModal');
    const media = document.getElementById('modalMedia');
    const cat = document.getElementById('modalCategory');
    const title = document.getElementById('modalTitle');
    const intro = document.getElementById('modalIntro');
    const wow = document.getElementById('modalWow');
    const addBtn = document.getElementById('addCircuit');
    const deep = document.getElementById('deepLink');

    let circuit = [];

    function baseOpenSite(key){
      const s = sites[key];
      media.textContent = s.emoji || 'üó∫Ô∏è';
      cat.textContent = s.cat;
      title.textContent = s.title[LANG] || s.title.en;
      intro.textContent = s.intro[LANG] || s.intro.en;
      wow.textContent = (LANG==='kn'?'‡≤µ‡≤æ‡≤µ‡≥Å: ':'Wow: ') + (s.wow[LANG] || s.wow.en);
      addBtn.onclick = () => { if(!circuit.includes(key)){ circuit.push(key); addBtn.textContent = (LANG==='kn'?'‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü ‚úì ':'Added ‚úì ') + '('+circuit.length+')'; } };
      addBtn.textContent = i18n[LANG].add;
      const url = location.origin + location.pathname + '#site=' + key + '&lang=' + LANG;
      deep.href = url;
      const qr = new QRious({ element: document.getElementById('qr'), value: url, size: 140, background: '#0b1536', foreground: '#bfe7ff' });
      modal.showModal();
    }

    function openSite(key){
      const s = sites[key];
      const img = document.getElementById('modalImg');
      if(s.img){ img.src = s.img; img.style.display='block'; media.textContent=''; }
      else { img.removeAttribute('src'); img.style.display='none'; media.textContent = s.emoji || 'üó∫Ô∏è'; }
      baseOpenSite(key);
      circuitBadge.textContent = circuit.length;
    }

    document.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', e => openSite(e.currentTarget.dataset.key));
    });

    siteModal.addEventListener('click', (e)=>{ const r = siteModal.getBoundingClientRect(); if(!(e.clientX>r.left && e.clientX<r.right && e.clientY>r.top && e.clientY<r.bottom)) siteModal.close(); });

    function handleHash(){
      const h = new URLSearchParams(location.hash.replace('#','?'));
      const k = h.get('site'); const lg = h.get('lang');
      if(lg && (lg==='en'||lg==='kn')) setLang(lg);
      if(k && sites[k]) openSite(k);
    }
    window.addEventListener('hashchange', handleHash);

    document.getElementById('langToggle').addEventListener('click', ()=> setLang(LANG==='en'?'kn':'en'));

    // Itinerary
    const circuitBadge = document.getElementById('circuitCount');
    const planBtn = document.getElementById('viewItinerary');
    const clearBtn = document.getElementById('clearItinerary');
    const planList = document.getElementById('planList');
    const distWrap = document.getElementById('distWrap');
    let selectedIndex = 0;

    function refreshPlan(){
      planList.innerHTML = '';
      circuit.forEach((k,i)=>{
        const li = document.createElement('li');
        li.textContent = (sites[k].title[LANG]||sites[k].title.en);
        li.dataset.key = k; li.tabIndex = 0;
        if(i===selectedIndex) li.style.outline = '2px solid var(--ring)';
        planList.appendChild(li);
      });
      circuitBadge.textContent = circuit.length;
      refreshDistances();
    }

    function haversine(a,b){
      const toRad = d=>d*Math.PI/180; const R=6371;
      const [lat1,lon1]=a,[lat2,lon2]=b; const dLat=toRad(lat2-lat1), dLon=toRad(lon2-lon1);
      const s1=Math.sin(dLat/2)**2 + Math.cos(toRad(lat1))*Math.cos(toRad(lat2))*Math.sin(dLon/2)**2;
      return 2*R*Math.asin(Math.sqrt(s1));
    }

    function refreshDistances(){
      if(circuit.length<2){distWrap.textContent = LANG==='kn'?'‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤¶ ‡≤¶‡≥Ç‡≤∞ ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤':'Add 2+ sites to estimate distance.'; return;}
      let total=0; let html='';
      for(let i=0;i<circuit.length-1;i++){
        const a=sites[circuit[i]].ll, b=sites[circuit[i+1]].ll;
        const d=haversine(a,b); total+=d; html += `${i+1}. ${sites[circuit[i]].title[LANG]||sites[circuit[i]].title.en} ‚Üí ${sites[circuit[i+1]].title[LANG]||sites[circuit[i+1]].title.en}: ${d.toFixed(1)} km<br/>`;
      }
      html += `<b>${LANG==='kn'?'‡≤í‡≤ü‡≥ç‡≤ü‡≥Å':'Total'}: ${total.toFixed(1)} km</b>`;
      distWrap.innerHTML = html;
    }

    planBtn.addEventListener('click', ()=>{ selectedIndex = 0; refreshPlan(); planModal.showModal(); });
    clearBtn.addEventListener('click', ()=>{ circuit.length = 0; refreshPlan(); });

    document.getElementById('planClear').addEventListener('click', ()=>{ circuit.length=0; refreshPlan(); });
    document.getElementById('planUp').addEventListener('click', ()=>{ if(selectedIndex>0){ const t=circuit[selectedIndex-1]; circuit[selectedIndex-1]=circuit[selectedIndex]; circuit[selectedIndex]=t; selectedIndex--; refreshPlan(); }});
    document.getElementById('planDown').addEventListener('click', ()=>{ if(selectedIndex<circuit.length-1){ const t=circuit[selectedIndex+1]; circuit[selectedIndex+1]=circuit[selectedIndex]; circuit[selectedIndex]=t; selectedIndex++; refreshPlan(); }});
    document.getElementById('planRemove').addEventListener('click', ()=>{ if(circuit.length){ circuit.splice(selectedIndex,1); if(selectedIndex>=circuit.length) selectedIndex=Math.max(0,circuit.length-1); refreshPlan(); }});

    planList.addEventListener('click', (e)=>{
      if(e.target.tagName==='LI'){ selectedIndex = Array.from(planList.children).indexOf(e.target); refreshPlan(); }
    });

    document.getElementById('exportJSON').addEventListener('click', ()=>{
      const data = circuit.map(k=>({ key:k, title: sites[k].title[LANG]||sites[k].title.en, ll: sites[k].ll }));
      const blob = new Blob([JSON.stringify({lang:LANG, circuit:data}, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob); const a = document.createElement('a');
      a.href = url; a.download = 'karnataka_itinerary.json'; a.click(); URL.revokeObjectURL(url);
    });

    document.getElementById('printPlan').addEventListener('click', ()=> window.print());

    setLang('en');
    handleHash();
  </script>
</body>
</html>
